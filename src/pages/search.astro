---
import Layout from "../layouts/Layout.astro";
---
<Layout title="Search | Ash Above, Ash Below" description="Find rules, tools, and references">
  <section class="mx-auto max-w-3xl space-y-2">
    <h1 class="text-3xl font-bold tracking-tight">Search the SRD</h1>
    <p class="text-sm opacity-70">Type to find rules, tools, and references.</p>
    <div id="search" class="rounded-2xl border p-3 bg-white/70 dark:bg-white/5"></div>
    <p id="search-hint" class="mt-2 text-xs text-amber-600 hidden">
      Build required for search. Run <code>npm run build</code> then preview the build.
    </p>
  </section>

  <link href={import.meta.env.BASE_URL + 'pagefind/pagefind-ui.css'} rel="stylesheet" />
  <script src={import.meta.env.BASE_URL + 'pagefind/pagefind-ui.js'} type="text/javascript"></script>
  <script>
    window.addEventListener("DOMContentLoaded", () => {
      if (window.PagefindUI) {
        new window.PagefindUI({
          element: "#search",
          showSubResults: true,
          translations: { placeholder: "Search rules (e.g., Advantage, Stress, TN)..." }
        });
      } else {
        document.getElementById("search-hint")?.classList.remove("hidden");
      }
    });
  </script>
</Layout>
